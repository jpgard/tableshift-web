<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="https://jpgard.github.io/tableshift-web/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://jpgard.github.io/tableshift-web/theme/css/custom.css" media="screen">
        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Josh Gardner" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">


<meta property="og:title" content="Quickstart "/>
<meta property="og:url" content="https://jpgard.github.io/tableshift-web/quickstart.html" />
<meta property="og:description" content="Quickstart¶ This page provides simple examples to get started accessing data and training models with TableShift. If you would like to set up customized experiments or run experiments at scale, check the examples in our github repository here. 1. Environment Setup¶ We recommend using our prebuilt docker environment as a …" />
<meta property="og:site_name" content="TableShift" />
<meta property="og:article:author" content="Josh Gardner" />
<meta name="twitter:title" content="Quickstart ">
<meta name="twitter:description" content="Quickstart¶ This page provides simple examples to get started accessing data and training models with TableShift. If you would like to set up customized experiments or run experiments at scale, check the examples in our github repository here. 1. Environment Setup¶ We recommend using our prebuilt docker environment as a …">

        <title>Quickstart  · TableShift
</title>
        <link href="https://jpgard.github.io/tableshift-web/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="TableShift - Full Atom Feed" />



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <!-- Header w/title only-->
                        <!-- <a class="brand" href="https://jpgard.github.io/tableshift-web/"><span class=site-name>TableShift</span></a> -->
                        <a class="brand" href="https://jpgard.github.io/tableshift-web/"><span class=site-name><img class="site-img" style="height:48px;vertical-align:text-bottom;" src="/images/tableshift.png"></span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://jpgard.github.io/tableshift-web
                                    >Home</a>
                                </li>
                                <li ><a href="https://jpgard.github.io/tableshift-web/index.html">TableShift</a></li>
                                <li  class="active"><a href="https://jpgard.github.io/tableshift-web/quickstart.html">Quickstart</a></li>
                                <li ><a href="https://jpgard.github.io/tableshift-web/datasets.html">Datasets</a></li>
                                <li ><a href="https://jpgard.github.io/tableshift-web/faq.html">FAQ</a></li>
                                <li><a href="https://github.com/mlfoundations/tableshift"><img class="site-img" style="height:24px;" src="/images/github-mark.png"></a> </li>
                                <!-- <li ><a href="https://jpgard.github.io/tableshift-web/categories.html">Categories</a></li> -->
                                <!-- <li ><a href="https://jpgard.github.io/tableshift-web/tags.html">Tags</a></li> -->
                                <!-- <li ><a href="https://jpgard.github.io/tableshift-web/archives.html">Archives</a></li> -->
                                <!-- <li><form class="navbar-search" action="https://jpgard.github.io/tableshift-web/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article>
<div class="row-fluid">
    <header class="page-header span10 offset2">
    <h1><a href="https://jpgard.github.io/tableshift-web/quickstart.html"> Quickstart  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <h1 id="quickstart">Quickstart<a class="headerlink" href="#quickstart" title="Permanent link">&para;</a></h1>
<p>This page provides simple examples to get started accessing data and training models with TableShift. If you would like to set up customized experiments or run experiments at scale, check the examples in our github repository <a href="https://github.com/mlfoundations/tableshift/tree/main/examples">here</a>.</p>
<h2 id="1-environment-setup">1. Environment Setup<a class="headerlink" href="#1-environment-setup" title="Permanent link">&para;</a></h2>
<p>We recommend using our prebuilt docker environment as a starting point, due to the complex dependencies required to support the many tabular data models available in TableShift. You can fetch a prebuilt Docker image via</p>
<div class="highlight"><pre><span></span><code><span class="c1"># fetch the docker image</span>
docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/jpgard/tableshift:latest

<span class="c1"># run it to test your setup; this automatically launches examples/run_expt.py</span>
docker<span class="w"> </span>run<span class="w"> </span>ghcr.io/jpgard/tableshift:latest<span class="w"> </span>--model<span class="w"> </span>xgb

<span class="c1"># optionally, use the container interactively</span>
docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--entrypoint<span class="o">=</span>/bin/bash<span class="w"> </span>ghcr.io/jpgard/tableshift:latest
</code></pre></div>

<p>You can change the <code>entrypoint</code> in the above code to <code>/usr/local/bin/python</code> to directly enter a Python interpreter and run Python code. For example, the block below loads a dataset for model training:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># To run Python code using the Docker environment from above, run:</span>
<span class="c1"># docker run -it --entrypoint=/usr/local/bin/python ghcr.io/jpgard/tableshift:latest</span>

<span class="kn">from</span> <span class="nn">tableshift</span> <span class="kn">import</span> <span class="n">get_dataset</span>

<span class="n">dataset_name</span> <span class="o">=</span> <span class="s2">&quot;diabetes_readmission&quot;</span>
<span class="n">dset</span> <span class="o">=</span> <span class="n">get_dataset</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">)</span>

<span class="c1"># Fetch a pandas DataFrame of the training set</span>
<span class="n">X_tr</span><span class="p">,</span> <span class="n">y_tr</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dset</span><span class="o">.</span><span class="n">get_pandas</span><span class="p">(</span><span class="s2">&quot;train&quot;</span><span class="p">)</span>

<span class="c1"># Fetch and use a pytorch DataLoader</span>
<span class="n">train_loader</span> <span class="o">=</span> <span class="n">dset</span><span class="o">.</span><span class="n">get_dataloader</span><span class="p">(</span><span class="s2">&quot;train&quot;</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>

<span class="k">for</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">train_loader</span><span class="p">:</span>
    <span class="o">...</span>
</code></pre></div>

<h2 id="2-model-training">2. Model Training<a class="headerlink" href="#2-model-training" title="Permanent link">&para;</a></h2>
<p>TableShift includes implementations of 19 different models (described in the paper and in detail here). To train a model on a publicly-available dataset, you can you the example script provided in the examples directory:</p>
<div class="highlight"><pre><span></span><code>python examples/run_expt.py --experiment diabetes_readmission --model xgb
</code></pre></div>

<p>That's it!</p>
<h2 id="3-optional-and-advanced-usage">3. Optional and Advanced Usage<a class="headerlink" href="#3-optional-and-advanced-usage" title="Permanent link">&para;</a></h2>
<p>This section outlines some advanced use cases: benchmarking your own models, running distributed hyperparameter tuning of the models available in TableShift, or (an experimental/not-officially-supported feature) using your own datasets in TableShift.</p>
<h3 id="benchmarking-your-own-models">Benchmarking Your Own Models<a class="headerlink" href="#benchmarking-your-own-models" title="Permanent link">&para;</a></h3>
<p>Training with your own models should be managed in your own scripts (but <code>examples/run_expt.py</code> is a good starting point). All you need is a few lines of Python code to access the TableShift data in Pandas, Torch, or Ray format (see the example above) to train your model.</p>
<h3 id="distributed-hyperparameter-tuning-with-ray">Distributed hyperparameter tuning with Ray<a class="headerlink" href="#distributed-hyperparameter-tuning-with-ray" title="Permanent link">&para;</a></h3>
<p>We recommend tuning the hyperparameters of any method in order to fairly evaluate its performance on the tasks in TableShift.</p>
<p>If you would like to run distributed hyperparameter tuning with Ray on one of the available models, you can run</p>
<div class="highlight"><pre><span></span><code>ulimit -u 127590 &amp;&amp; python scripts/ray_train.py \ 
    --experiment adult \ 
    --num_samples 2 \ 
    --num_workers 1 \ 
    --cpu_per_worker 4 \ 
    --use_cached \ 
    --models xgb
</code></pre></div>

<p>Please note that Ray can require careful tuning based on your system resources for optimal performance. For more information, check the Ray Tune documentation.</p>
<h3 id="using-your-own-datasets">Using Your Own Datasets<a class="headerlink" href="#using-your-own-datasets" title="Permanent link">&para;</a></h3>
<p>The TableShift package is designed to support the benchmark datasets only. However, some users have expressed interest in "bringing their own data". To do this, you'll need to make the following changes to the TableShift Python source:
* Add a <code>DataSource</code> for your dataset in <code>tableshift/core/data_source.py</code>. The <code>DataSource</code> specifies how to fetch a dataset and how to check if it is cached locally.
* Add an <code>ExperimentConfig</code> in <code>tableshift/configs/non_benchmark_configs.py</code>. An <code>ExperimentConfig</code> defines how the data is split (i.e. the ID and OOD partitions) and optional grouping based on sensitive attributes.
* Add a <code>TaskConfig</code> for the dataset. A <code>TaskConfig</code> defines the features, data types, and any preprocessing for a dataset. </p>
            







        </div>
    </div>
    </article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="https://jpgard.github.io/tableshift-web/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>